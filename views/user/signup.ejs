<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Noor Fragrances - Sign Up</title>
    <link rel="stylesheet" href="/styles/signup.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      .error-message {
        color: red;
        font-size: 14px;
        display: none; /* Hide error messages initially */
      }
      .google-signup-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #fff;
        color: #757575;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10px;
        margin-top: 15px;
        width: 100%;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s, box-shadow 0.3s;
      }
      .google-signup-btn:hover {
        background-color: #f8f8f8;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      }
      .google-signup-btn svg {
        margin-right: 10px;
        width: 20px;
        height: 20px;
      }
      .or-divider {
        display: flex;
        align-items: center;
        text-align: center;
        margin: 20px 0;
      }
      .or-divider::before,
      .or-divider::after {
        content: '';
        flex: 1;
        border-bottom: 1px solid #ddd;
      }
      .or-divider span {
        padding: 0 10px;
        color: #757575;
      }
      a{
        text-decoration: none;
      }
    </style>
  </head>
  <body>
    <div class="page-container">
      <div class="image-container">
        <img src="/img/logo/logo1.png" alt="Noor Fragrance bottle" />
      </div>

      <div class="signup-container">
        <h1>Get Started Now</h1>

        <form id="signForm" method="post" action="/signup">
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" id="name" name="name" placeholder="Enter your name" />
            <div id="error1" class="error-message"></div>
          </div>

          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" id="email" name="email" placeholder="Enter your email" />
            <div id="error2" class="error-message"></div>
          </div>

          <div class="form-group">
            <label for="phone">Phone</label>
            <input type="tel" id="phone" name="phone" placeholder="Enter your phone number" />
            <div id="error3" class="error-message"></div>
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input type="password" id="password" name="password" placeholder="Enter your password" />
            <div id="error4" class="error-message"></div>
          </div>

          <div class="form-group">
            <label for="confirm-password">Confirm Password</label>
            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" />
            <div id="error5" class="error-message"></div>
          </div>
          <br>
          <% if (locals.message && message.length > 0){%>
            <div class="alert alert-danger text-center"><%= message %></div>
          <%}%>

          <button type="submit" name="signup">Signup</button>

          <div class="or-divider">
            <span>OR</span>
          </div>

          <a href="/auth/google" type="button" class="google-signup-btn" id="googleSignupBtn">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48">
              <path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"/>
              <path fill="#FF3D00" d="M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 16.318 4 9.656 8.337 6.306 14.691z"/>
              <path fill="#4CAF50" d="M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238A11.91 11.91 0 0 1 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"/>
              <path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303a12.04 12.04 0 0 1-4.087 5.571l.003-.002 6.19 5.238C36.971 39.801 44 34 44 24c0-1.341-.138-2.65-.389-3.917z"/>
            </svg>
            Sign up with Google
          </a>
          <div class="signin-link">
            Do you have an account? <a href="/login">login</a>
        </div>
        </form>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      
      const nameid = document.getElementById("name");
      const emailid = document.getElementById("email");
      const phoneid = document.getElementById("phone");
      const password = document.getElementById("password");
      const confirmPassword = document.getElementById("confirmPassword");
      const error1 = document.getElementById("error1");
      const error2 = document.getElementById("error2");
      const error3 = document.getElementById("error3");
      const error4 = document.getElementById("error4");
      const error5 = document.getElementById("error5");
      const signForm = document.getElementById("signForm");
      const googleSignupBtn = document.getElementById("googleSignupBtn");

      function nameValidateChecking() {
        const nameval = nameid.value.trim();
        const namepattern = /^[A-Za-z\s]+$/;
        if (!nameval) {
          error1.style.display = "block";
          error1.innerHTML = "Please enter your name";
        } else if (!namepattern.test(nameval)) {
          error1.style.display = "block";
          error1.innerHTML = "Name can only contain alphabets and spaces";
        } else {
          error1.style.display = "none";
        }
      }

      function emailValidateChecking() {
        const emailval = emailid.value.trim();
        const emailpattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
        if (!emailval) {
          error2.style.display = "block";
          error2.innerHTML = "Please enter a valid email";
        } else if (!emailpattern.test(emailval)) {
          error2.style.display = "block";
          error2.innerHTML = "Invalid email format (e.g., example@mail.com)";
        } else {
          error2.style.display = "none";
        }
      }

      function phoneValidateChecking() {
        const phoneval = phoneid.value.trim();
        const phonepattern = /^[0-9]{10}$/;
        if (!phoneval) {
          error3.style.display = "block";
          error3.innerHTML = "Please enter your phone number";
        } else if (!phonepattern.test(phoneval)) {
          error3.style.display = "block";
          error3.innerHTML = "Phone number must be exactly 10 digits";
        } else {
          error3.style.display = "none";
        }
      }

      function passwordValidateChecking() {
        const passval = password.value.trim();
        const cpassval = confirmPassword.value.trim();
        const alpha = /[a-zA-Z]/;
        const digit = /\d/;

        if (passval.length < 8) {
          error4.style.display = "block";
          error4.innerHTML = "Password must be at least 8 characters long";
        } else if (!alpha.test(passval) || !digit.test(passval)) {
          error4.style.display = "block";
          error4.innerHTML = "Password must contain both letters and numbers";
        } else {
          error4.style.display = "none";
        }

        if (passval !== cpassval) {
          error5.style.display = "block";
          error5.innerHTML = "Passwords do not match";
        } else {
          error5.style.display = "none";
        }
      }


      document.addEventListener("DOMContentLoaded", () => {
        signForm.addEventListener("submit", (e) => {
          nameValidateChecking();
          emailValidateChecking();
          phoneValidateChecking();
          passwordValidateChecking();

          if (
            error1.style.display === "block" ||
            error2.style.display === "block" ||
            error3.style.display === "block" ||
            error4.style.display === "block" ||
            error5.style.display === "block"
          ) {
            e.preventDefault(); // Prevent form submission if errors exist
          }
        });
      });
    </script>
  </body>
</html>